version: '3'

networks:
  redis:
    external: true

services:
  redis1:
    image: redis:5.0.14-alpine3.15
    container_name: redis1
    restart: always
    volumes:
    - ./node1/conf/:/etc/redis/
    - ./node1/data:/data
    environment:
    - TZ=Asia/Shanghai
    - LANG=en_US.UTF-8
    ports:
      - '7001:6379'
      - '17001:16379'
      - '1122:22'
    command: ["redis-server", "/etc/redis/redis.conf"]
    privileged: true
    networks:
      - redis

  redis2:
    image: redis:5.0.14-alpine3.15
    container_name: redis2
    restart: always
    volumes:
    - ./node2/conf/:/etc/redis/
    - ./node2/data:/data
    environment:
    - TZ=Asia/Shanghai
    - LANG=en_US.UTF-8
    ports:
      - '7002:6379'
      - '17002:16379'
    command: ["redis-server", "/etc/redis/redis.conf"]
    privileged: true
    networks:
      - redis

  redis3:
    image: redis:5.0.14-alpine3.15
    container_name: redis3
    restart: always
    volumes:
    - ./node3/conf/:/etc/redis/
    - ./node3/data:/data
    environment:
    - TZ=Asia/Shanghai
    - LANG=en_US.UTF-8
    ports:
      - '7003:6379'
      - '17003:16379'
    command: ["redis-server", "/etc/redis/redis.conf"]
    privileged: true
    networks:
      - redis
